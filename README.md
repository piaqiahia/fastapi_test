
#  AI Application API with Local Embedding

> **ç¬¬3å‘¨äº¤ä»˜æˆæœ** | 12å‘¨AIåº”ç”¨å·¥ç¨‹å¸ˆæ±‚èŒå†²åˆºè®¡åˆ’ Â· Week 3  
> **æ ¸å¿ƒä»·å€¼**ï¼šå®ç°**ä¼ä¸šçº§å®‰å…¨è®¾è®¡**ï¼ˆæœ¬åœ°æ¨¡å‹ï¼‰+ **å®Œæ•´APIé“¾è·¯**ï¼ˆEmbedding â†’ QAï¼‰ï¼Œéä¾èµ–OpenAIçš„å·¥ç¨‹åŒ–æ–¹æ¡ˆ
---
## ğŸš€ å¿«é€Ÿå¯åŠ¨ï¼ˆ5åˆ†é’Ÿéƒ¨ç½²ï¼‰

### 1. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```
### 2. å¯åŠ¨æœåŠ¡
```bash
uvicorn main:app --reload --port 8000
```

### 3. è®¿é—®APIæ–‡æ¡£
| æ–‡æ¡£ç±»å‹ | è®¿é—®åœ°å€ | è¯´æ˜ |
|----------|----------|--------------|
| **Swagger UI** | http://localhost:8000/docs |æ‰€æœ‰æ¥å£éƒ½æœ‰äº¤äº’å¼æ–‡æ¡£|
| **ReDoc** | http://localhost:8000/redoc |ä¸“ä¸šå¼€å‘è€…æœ€çˆ±çš„APIæ–‡æ¡£æ ¼å¼|

---

## ğŸ§ª å…³é”®æ¥å£æµ‹è¯•ç¤ºä¾‹

### ğŸ”¹ 1. é—®ç­”æ¥å£ï¼ˆ/askï¼‰
```bash
curl -X POST "http://localhost:8000/ask" -H "Content-Type: application/json" -d "{\"question\":\"äººå·¥æ™ºèƒ½æ˜¯ä»€ä¹ˆï¼Ÿ\"}"
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "question": "äººå·¥æ™ºèƒ½æ˜¯ä»€ä¹ˆï¼Ÿ",
  "answer": "æ ¹æ®æ–‡æ¡£å†…å®¹ï¼šäººå·¥æ™ºèƒ½æ˜¯è®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œå®ƒè¯•å›¾åˆ›å»ºèƒ½å¤Ÿæ‰§è¡Œäººç±»æ™ºèƒ½ä»»åŠ¡çš„æœºå™¨ã€‚",
  "context": "äººå·¥æ™ºèƒ½æ˜¯è®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œå®ƒè¯•å›¾åˆ›å»ºèƒ½å¤Ÿæ‰§è¡Œäººç±»æ™ºèƒ½ä»»åŠ¡çš„æœºå™¨ã€‚"
}
```
---
### ğŸ”¹ 2. å•æ–‡æœ¬Embeddingï¼ˆ/embedï¼‰
```bash
curl -X POST "http://localhost:8000/embed" -H "Content-Type: application/json" -d "{\"text\":\"å¤§æ¨¡å‹æ˜¯AIçš„çƒ­ç‚¹\"}"
```

**é¢„æœŸå“åº”**ï¼ˆæˆªå–éƒ¨åˆ†ï¼‰ï¼š
```json
{
  "vector": [
    0.023, -0.156, 0.321, ... 512ç»´å‘é‡
  ]
}
```

---

### ğŸ”¹ 3. æ‰¹é‡Embeddingï¼ˆ/embed/batchï¼‰
```bash
curl -X POST "http://localhost:8000/embed/batch" -H "Content-Type: application/json" -d "{\"texts\":[\"ä»Šå¤©å¤©æ°”å¾ˆå¥½\",\"æˆ‘æƒ³å­¦ä¹ AI\"]}"
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "vectors": [
    [0.023, -0.156, ...],
    [0.12, 0.05, ...]
  ]
}
```

---

## ğŸ“¦ ä¾èµ–é¡¹ï¼ˆä¼ä¸šçº§å®‰å…¨è®¾è®¡è¯´æ˜ï¼‰

```text
fastapi>=0.100.0
uvicorn[standard]>=0.22.0
sentence-transformers>=2.2.2  # æœ¬åœ°Embeddingæ ¸å¿ƒ
langchain>=0.1.17            # ä¸ºç¬¬5å‘¨ChromaDBåšå‡†å¤‡
```

> **ä¸ºä»€ä¹ˆä¸ç”¨OpenAIï¼Ÿ**  
> *ä¼ä¸šçº§é¡¹ç›®è¦æ±‚æ•°æ®ä¸å‡ºåŸŸï¼Œä¾èµ–æœ¬åœ°æ¨¡å‹é¿å…å®‰å…¨é£é™©*

---

## ğŸŒ é¡¹ç›®ç»“æ„

```bash
my_fastapi_app/
â”œâ”€â”€ main.py                  # FastAPIæ ¸å¿ƒå®ç°ï¼ˆå«æ‰€æœ‰æ¥å£ï¼‰
â”œâ”€â”€ embedding_service.py     # æœ¬åœ°EmbeddingæœåŠ¡å°è£…
â”œâ”€â”€ requirements.txt         # ä¾èµ–æ¸…å•
â””â”€â”€README.md                # æœ¬æ–‡ä»¶
```